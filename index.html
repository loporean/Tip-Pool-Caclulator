<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Tip Pooling Calculator</title>
</head>
<body>
    <h1>Tip Pooling Calculator</h1>

    <!-- Description of calculator -->
    <div class="description">
        <p>The Tip Pooling Calculator divides tips among employees 
        based on their hours worked, guaranteeing equitable distribution 
        from the shared tips pool.</p>
    </div>

    <!-- <button type="button" onclick="addMore()">Add 5</button><br><br> -->
            
    <button type="button" onclick="addEmployee()">add</button>
    <button type="button" onclick="removeEmployee()">remove</button><br><br>
    
    <!-- Title for inputs -->
        <div class="inputTitle">
        <span>Name</span>
        <span>Hours</span>
        </div>
    
    <div id="employeeContainer" class="employeeContainer">
        <span>1. </span>
            <input type="text" id="name" name="name" placeholder="Employee Name"><input type="text" id="hours" name="hours" placeholder="Hours Worked" min="0" oninput="isNum(this)">
        <br>
    </div> 
    <br>

    <!-- Reset Button for inputs -->
    <button type="button" onclick="resetFormFields()">Reset</button>

    <br><br>

    <label for="totalTips" style="font-weight: 100;">Total Tips:</label>
    <input type="text" id="totalTips" name="totalTips" oninput="isNum(this)">
    <br><br><br>

    <button type="button" onclick="calcTips()">Calculate Tips</button>


    <!--  Displays results after calculating tips -->
    <div id="results" class="results"></div>

</body>

    <script src="index.js"></script>
    

    <script type="text/javascript">
        // function addMore() {
        //     for (let i=0; i<5; i++) {
        //         addEmployee();
        //     }
        // }

        function restoreEmployee(curr_count) {
            // Container where new field will be added
            var container = document.getElementById("employeeContainer");

            // Increment the count based on the for loop
            var employeeCount = document.createElement("span");
            employeeCount.textContent = curr_count + ". ";

            // Create new input field for name and hours
            var nameField = document.createElement("input");
            nameField.type = "text";
            nameField.name = "name";
            nameField.placeholder = "Employee Name";

            var hoursField = document.createElement("input");
            hoursField.type = "text";
            hoursField.name = "hours";
            hoursField.placeholder = "Hours Worked";
            hoursField.min = "0";
            hoursField.oninput = function() { isNum(this); };

            // Add line break
            var br = document.createElement("br");

            // Append new fields to container
            container.appendChild(employeeCount);
            container.appendChild(nameField);
            container.appendChild(hoursField);
            container.appendChild(br);
        }

        // If local storage contains previous count
        // then generate fields from previous session
        function restoreFields() {
            if (count !== 1) {
                // Grab the initial count
                var initialCount = count;
                for (let i=1; i<initialCount; i++) {
                    // Pass in the current count
                    restoreEmployee(i+1);
                }
            } else {
                console.log("Count is 1");
            }
        }

        // Trigger on page load
        window.onload = restoreFields;

    </script>

</html>